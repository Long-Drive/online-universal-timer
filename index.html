<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Universal Timer</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #333;
      text-align: center;
    }
    header {
      background-color: #007BFF;
      color: white;
      padding: 2rem 1rem 1rem;
    }
    header h1 {
      margin: 0;
      font-size: 2.5rem;
    }
    header p {
      margin: 0.5rem 0 1rem;
      font-size: 1.2rem;
      font-style: italic;
    }
    main {
      padding: 2rem;
    }
    select, input, button {
      font-size: 1rem;
      padding: 0.5rem;
      margin: 0.5rem;
    }
    #timerDisplay {
      font-size: 2rem;
      margin: 2rem 0;
    }
    .timer-section {
      display: none;
    }
    .visible {
      display: block;
    }
  </style>
</head>
<body>
  <header>
    <h1>Universal Timer</h1>
    <p>Timers for every occasion</p>
  </header>
  <main>
    <label for="timerType">Select Timer:</label>
    <select id="timerType">
      <option value="">-- Select --</option>
      <option value="countdown">Countdown / Egg Timer</option>
      <option value="stopwatch">Stopwatch</option>
      <option value="hiit">HIIT Interval Timer</option>
      <option value="pomodoro">Pomodoro Timer</option>
      <option value="chess">Chess Clock</option>
      <option value="event">Event Countdown</option>
      <option value="tabata">Tabata Timer</option>
      <option value="custom">Custom Interval Timer</option>
      <option value="presentation">Presentation Timer</option>
      <option value="breathing">Breathing Timer</option>
      <option value="soundloop">Repeating Sound Timer</option>
    </select>

    <div id="timerDisplay" class="timer-section visible">Select a timer type to begin</div>
    <div id="timerControls" class="timer-section"></div>
  </main>

  <script>
    const timerType = document.getElementById('timerType');
    const timerDisplay = document.getElementById('timerDisplay');
    const timerControls = document.getElementById('timerControls');

    timerType.addEventListener('change', renderTimer);

    function renderTimer() {
      const type = timerType.value;
      timerDisplay.innerHTML = '';
      timerControls.innerHTML = '';
      clearInterval(window.timer);

      if (!type) {
        timerDisplay.textContent = 'Select a timer type to begin';
        timerDisplay.classList.add('visible');
        timerControls.classList.remove('visible');
        return;
      }

      timerDisplay.classList.add('visible');
      timerControls.classList.add('visible');

      switch (type) {
        case 'countdown':
          renderCountdown();
          break;
        case 'stopwatch':
          renderStopwatch();
          break;
        case 'hiit':
          renderHIIT();
          break;
        case 'pomodoro':
          renderPomodoro();
          break;
        case 'chess':
          renderChess();
          break;
        case 'event':
          renderEventCountdown();
          break;
        case 'tabata':
          renderTabata();
          break;
        case 'custom':
          renderCustomInterval();
          break;
        case 'presentation':
          renderPresentation();
          break;
        case 'breathing':
          renderBreathing();
          break;
        case 'soundloop':
          renderSoundLoop();
          break;
        default:
          timerDisplay.textContent = 'Select a timer type to begin';
          timerControls.innerHTML = '';
      }
    }

    function renderCountdown() {
      timerControls.innerHTML = `
        <input type="number" id="countdownInput" placeholder="Seconds" min="1">
        <button onclick="startCountdown()">Start</button>`;
      timerDisplay.textContent = '';
    }

    function startCountdown() {
      const input = document.getElementById('countdownInput').value;
      let time = parseInt(input);
      if (isNaN(time) || time < 1) {
        alert('Please enter a valid number of seconds.');
        return;
      }
      clearInterval(window.timer);
      window.timer = setInterval(() => {
        if (time <= 0) {
          clearInterval(window.timer);
          timerDisplay.textContent = "Time's up!";
        } else {
          timerDisplay.textContent = time + 's';
          time--;
        }
      }, 1000);
    }

    function renderStopwatch() {
      timerControls.innerHTML = `
        <button onclick="startStopwatch()">Start</button>
        <button onclick="stopStopwatch()">Stop</button>
        <button onclick="resetStopwatch()">Reset</button>`;
      timerDisplay.textContent = '0s';
      window.swTime = 0;
    }

    function startStopwatch() {
      clearInterval(window.timer);
      window.timer = setInterval(() => {
        window.swTime++;
        timerDisplay.textContent = window.swTime + 's';
      }, 1000);
    }

    function stopStopwatch() {
      clearInterval(window.timer);
    }

    function resetStopwatch() {
      clearInterval(window.timer);
      window.swTime = 0;
      timerDisplay.textContent = '0s';
    }

    function renderHIIT() {
      timerControls.innerHTML = `
        <input type="number" id="hiitWork" placeholder="Work (sec)" min="1">
        <input type="number" id="hiitRest" placeholder="Rest (sec)" min="1">
        <input type="number" id="hiitRounds" placeholder="Rounds" min="1">
        <button onclick="startHIIT()">Start</button>`;
      timerDisplay.textContent = '';
    }

    function startHIIT() {
      let work = parseInt(document.getElementById('hiitWork').value);
      let rest = parseInt(document.getElementById('hiitRest').value);
      let rounds = parseInt(document.getElementById('hiitRounds').value);
      if ([work, rest, rounds].some(v => isNaN(v) || v < 1)) {
        alert('Please enter valid positive numbers for work, rest, and rounds.');
        return;
      }
      let current = 1;
      let mode = 'Work';
      let time = work;

      clearInterval(window.timer);
      window.timer = setInterval(() => {
        timerDisplay.textContent = `Round ${current} - ${mode}: ${time}s`;
        time--;
        if (time < 0) {
          if (mode === 'Work') {
            mode = 'Rest';
            time = rest;
          } else {
            current++;
            if (current > rounds) {
              clearInterval(window.timer);
              timerDisplay.textContent = "HIIT complete!";
              return;
            }
            mode = 'Work';
            time = work;
          }
        }
      }, 1000);
    }

    function renderPomodoro() {
      timerControls.innerHTML = `
        <input type="number" id="pomoWork" placeholder="Work (min)" min="1">
        <input type="number" id="pomoBreak" placeholder="Break (min)" min="1">
        <input type="number" id="pomoRounds" placeholder="Rounds" min="1">
        <button onclick="startPomodoro()">Start</button>`;
      timerDisplay.textContent = '';
    }

    function startPomodoro() {
      let work = parseInt(document.getElementById('pomoWork').value) * 60;
      let rest = parseInt(document.getElementById('pomoBreak').value) * 60;
      let rounds = parseInt(document.getElementById('pomoRounds').value);
      if ([work, rest, rounds].some(v => isNaN(v) || v < 1)) {
        alert('Please enter valid positive numbers for work, break, and rounds.');
        return;
      }
      let current = 1;
      let mode = 'Work';
      let time = work;

      clearInterval(window.timer);
      window.timer = setInterval(() => {
        const min = Math.floor(time / 60);
        const sec = time % 60;
        timerDisplay.textContent = `Round ${current} - ${mode}: ${min}m ${sec}s`;
        time--;
        if (time < 0) {
          if (mode === 'Work') {
            mode = 'Break';
            time = rest;
          } else {
            current++;
            if (current > rounds) {
              clearInterval(window.timer);
              timerDisplay.textContent = "Pomodoro complete!";
              return;
            }
            mode = 'Work';
            time = work;
          }
        }
      }, 1000);
    }

    function renderChess() {
      timerControls.innerHTML = `
        <input type="number" id="chessTime" placeholder="Minutes per player" min="1">
        <button onclick="startChess()">
