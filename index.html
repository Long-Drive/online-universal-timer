<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Universal Timer</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f9f9f9;
      color: #222;
      text-align: center;
    }
    header {
      background: #0056b3;
      color: #fff;
      padding: 2rem 1rem 1rem;
    }
    main {
      padding: 2rem;
    }
    select, input, button {
      font-size: 1rem;
      padding: 0.5rem;
      margin: 0.5rem;
    }
    #timerDisplay {
      font-size: 2rem;
      margin: 2rem 0;
    }
    .timer-section {
      display: none;
    }
    .visible {
      display: block;
    }
    button i {
      margin-right: 0.3em;
    }
    button {
      cursor: pointer;
      border: 1px solid #0056b3;
      background: #fff;
      color: #0056b3;
      border-radius: 6px;
      transition: background 0.2s, color 0.2s;
    }
    button:hover, button:active, button:focus {
      background: #0056b3;
      color: #fff;
    }
    input[type="number"], input[type="text"], input[type="datetime-local"] {
      border: 1px solid #aaa;
      border-radius: 5px;
    }
    .feedback {
      color: #c00;
      font-weight: bold;
      margin-top: 1rem;
    }
    .feedback:not(.error) {
      color: #080;
    }
  </style>
</head>
<body>
  <header>
    <h1>Universal Timer</h1>
    <p>Timers for every occasion</p>
  </header>
  <main>
    <label for="timerType">Select Timer:</label>
    <select id="timerType" aria-label="Timer Type">
      <option value="">-- Select --</option>
      <option value="countdown">Countdown / Egg Timer</option>
      <option value="stopwatch">Stopwatch</option>
      <option value="hiit">HIIT Interval Timer</option>
      <option value="pomodoro">Pomodoro Timer</option>
      <option value="chess">Chess Clock</option>
      <option value="event">Event Countdown</option>
      <option value="tabata">Tabata Timer</option>
      <option value="custom">Custom Interval Timer</option>
      <option value="presentation">Presentation Timer</option>
      <option value="breathing">Breathing Timer</option>
      <option value="soundloop">Repeating Sound Timer</option>
      <option value="random">Random Timer</option>
    </select>
    <div id="timerDisplay" class="timer-section visible" role="status" aria-live="polite">Select a timer type to begin</div>
    <form id="timerControls" class="timer-section" aria-label="Timer Controls"></form>
    <div id="feedback" class="feedback" aria-live="polite"></div>
  </main>
  <script>
document.addEventListener('DOMContentLoaded', () => {
  const timerType = document.getElementById('timerType');
  const timerDisplay = document.getElementById('timerDisplay');
  const timerControls = document.getElementById('timerControls');
  const feedback = document.getElementById('feedback');
  let timer = null, chess = null;

  const clearTimer = () => { if (timer) clearInterval(timer); timer = null; };
  const showFeedback = (msg, isError = false) => {
    feedback.textContent = msg;
    feedback.className = isError ? 'feedback error' : 'feedback';
  };

  timerType.addEventListener('change', () => {
    clearTimer();
    timerDisplay.textContent = '';
    timerControls.innerHTML = '';
    feedback.textContent = '';
    timerDisplay.classList.add('visible');
    timerControls.classList.add('visible');
    if (!timerType.value) {
      timerDisplay.textContent = 'Select a timer type to begin';
      timerControls.classList.remove('visible');
      return;
    }
    timerMap[timerType.value]();
  });

  // Timer Renderers
  const timerMap = {
    countdown: renderCountdown,
    stopwatch: renderStopwatch,
    hiit: renderHIIT,
    pomodoro: renderPomodoro,
    chess: renderChess,
    event: renderEventCountdown,
    tabata: renderTabata,
    custom: renderCustomInterval,
    presentation: renderPresentation,
    breathing: renderBreathing,
    soundloop: renderSoundLoop,
    random: renderRandom
  };

  // Countdown Timer
  function renderCountdown() {
    timerControls.innerHTML = `
      <label for="countdownInput">Seconds:</label>
      <input type="number" id="countdownInput" min="1" required>
      <button id="startCountdown"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startCountdown').addEventListener('click', (e) => {
      e.preventDefault();
      let time = parseInt(document.getElementById('countdownInput').value, 10);
      if (isNaN(time) || time < 1) return showFeedback('Please enter a valid number of seconds.', true);
      showFeedback('');
      clearTimer();
      timerDisplay.textContent = `${time}s`;
      timer = setInterval(() => {
        timerDisplay.textContent = time > 0 ? `${time}s` : "Time's up!";
        if (time-- <= 0) clearTimer();
      }, 1000);
    });
  }

  // Stopwatch
  function renderStopwatch() {
    timerControls.innerHTML = `
      <button id="startStopwatch"><i class="fa fa-play"></i>Start</button>
      <button id="pauseStopwatch"><i class="fa fa-pause"></i>Pause</button>
      <button id="resetStopwatch"><i class="fa fa-rotate-left"></i>Reset</button>
    `;
    let elapsed = 0;
    timerDisplay.textContent = '0s';
    document.getElementById('startStopwatch').addEventListener('click', (e) => {
      e.preventDefault();
      clearTimer();
      timer = setInterval(() => timerDisplay.textContent = `${++elapsed}s`, 1000);
    });
    document.getElementById('pauseStopwatch').addEventListener('click', (e) => {
      e.preventDefault();
      clearTimer();
    });
    document.getElementById('resetStopwatch').addEventListener('click', (e) => {
      e.preventDefault();
      clearTimer();
      elapsed = 0;
      timerDisplay.textContent = '0s';
    });
  }

  // HIIT Timer
  function renderHIIT() {
    timerControls.innerHTML = `
      <label>Work (sec):</label><input type="number" id="hiitWork" min="1">
      <label>Rest (sec):</label><input type="number" id="hiitRest" min="1">
      <label>Rounds:</label><input type="number" id="hiitRounds" min="1">
      <button id="startHIIT"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startHIIT').addEventListener('click', (e) => {
      e.preventDefault();
      let work = parseInt(document.getElementById('hiitWork').value, 10);
      let rest = parseInt(document.getElementById('hiitRest').value, 10);
      let rounds = parseInt(document.getElementById('hiitRounds').value, 10);
      if ([work, rest, rounds].some(v => isNaN(v) || v < 1))
        return showFeedback('Please enter valid positive numbers for work, rest, and rounds.', true);
      showFeedback('');
      let current = 1, mode = 'Work', time = work;
      clearTimer();
      timer = setInterval(() => {
        timerDisplay.textContent = `Round ${current} - ${mode}: ${time}s`;
        if (time-- < 1) {
          if (mode === 'Work') { mode = 'Rest'; time = rest; }
          else if (++current > rounds) { clearTimer(); timerDisplay.textContent = "HIIT complete!"; }
          else { mode = 'Work'; time = work; }
        }
      }, 1000);
    });
  }

  // Pomodoro Timer
  function renderPomodoro() {
    timerControls.innerHTML = `
      <label>Work (min):</label><input type="number" id="pomodoroWork" min="1">
      <label>Rest (min):</label><input type="number" id="pomodoroRest" min="1">
      <label>Rounds:</label><input type="number" id="pomodoroRounds" min="1">
      <button id="startPomodoro"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startPomodoro').addEventListener('click', (e) => {
      e.preventDefault();
      let work = parseInt(document.getElementById('pomodoroWork').value, 10) * 60;
      let rest = parseInt(document.getElementById('pomodoroRest').value, 10) * 60;
      let rounds = parseInt(document.getElementById('pomodoroRounds').value, 10);
      if ([work, rest, rounds].some(v => isNaN(v) || v < 1))
        return showFeedback('Please enter valid values.', true);
      showFeedback('');
      let current = 1, mode = 'Work', time = work;
      clearTimer();
      timer = setInterval(() => {
        timerDisplay.textContent = `Round ${current} - ${mode}: ${Math.floor(time/60)}m ${time%60}s`;
        if (time-- < 1) {
          if (mode === 'Work') { mode = 'Break'; time = rest; }
          else if (++current > rounds) { clearTimer(); timerDisplay.textContent = "Pomodoro complete!"; }
          else { mode = 'Work'; time = work; }
        }
      }, 1000);
    });
  }

  // Chess Clock
  function renderChess() {
    timerControls.innerHTML = `
      <label>Minutes per player:</label>
      <input type="number" id="chessTime" min="1">
      <button id="startChess"><i class="fa fa-play"></i>Start</button>
      <button id="switchBtn" disabled><i class="fa fa-rotate"></i> Switch Player</button>
    `;
    chess = {active: null, times: [0,0], intervals: [null,null], running: false};
    document.getElementById('startChess').addEventListener('click', (e) => {
      e.preventDefault();
      let mins = parseInt(document.getElementById('chessTime').value, 10);
      if (isNaN(mins) || mins < 1) return showFeedback('Please enter minutes for each player.', true);
      showFeedback('');
      chess.times = [mins*60, mins*60];
      chess.active = 0;
      chess.running = true;
      document.getElementById('switchBtn').disabled = false;
      updateChessDisplay();
      runChessTimers();
    });
    document.getElementById('switchBtn').addEventListener('click', (e) => {
      e.preventDefault();
      if (!chess.running) return;
      chess.active = chess.active === 0 ? 1 : 0;
      runChessTimers();
    });
    function runChessTimers() {
      clearInterval(chess.intervals[0]); clearInterval(chess.intervals[1]);
      let act = chess.active;
      chess.intervals[act] = setInterval(() => {
        chess.times[act]--;
        updateChessDisplay();
        if (chess.times[act] <= 0) {
          clearInterval(chess.intervals[0]); clearInterval(chess.intervals[1]);
          timerDisplay.textContent = `Player ${act+1} time's up!`;
          chess.running = false;
          document.getElementById('switchBtn').disabled = true;
        }
      }, 1000);
    }
    function updateChessDisplay() {
      let format = t => `${Math.floor(t/60)}m ${t%60}s`;
      timerDisplay.textContent = `Player 1: ${format(chess.times[0])} | Player 2: ${format(chess.times[1])}`;
    }
  }

  // Event Countdown
  function renderEventCountdown() {
    timerControls.innerHTML = `
      <label>Date & time:</label>
      <input type="datetime-local" id="eventTime">
      <button id="startEventCountdown"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startEventCountdown').addEventListener('click', (e) => {
      e.preventDefault();
      let date = new Date(document.getElementById('eventTime').value);
      if (isNaN(date.getTime())) return showFeedback('Please select a valid date and time.', true);
      showFeedback('');
      clearTimer();
      timer = setInterval(() => {
        let diff = Math.floor((date.getTime() - Date.now())/1000);
        if (diff <= 0) { clearTimer(); timerDisplay.textContent = "Event started!"; return; }
        let d = Math.floor(diff/86400), h = Math.floor((diff%86400)/3600),
            m = Math.floor((diff%3600)/60), s = diff%60;
        timerDisplay.textContent = `${d}d ${h}h ${m}m ${s}s left`;
      },1000);
    });
  }

  // Tabata Timer
  function renderTabata() {
    timerControls.innerHTML = `
      <label>Work (sec):</label><input type="number" id="tabataWork" min="1">
      <label>Rest (sec):</label><input type="number" id="tabataRest" min="1">
      <label>Rounds:</label><input type="number" id="tabataRounds" min="1">
      <button id="startTabata"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startTabata').addEventListener('click', (e) => {
      e.preventDefault();
      let work = parseInt(document.getElementById('tabataWork').value, 10);
      let rest = parseInt(document.getElementById('tabataRest').value, 10);
      let rounds = parseInt(document.getElementById('tabataRounds').value, 10);
      if ([work, rest, rounds].some(v => isNaN(v) || v < 1))
        return showFeedback('Please enter valid values.', true);
      showFeedback('');
      let current = 1, mode = 'Work', time = work;
      clearTimer();
      timer = setInterval(() => {
        timerDisplay.textContent = `Round ${current} - ${mode}: ${time}s`;
        if (time-- < 1) {
          if (mode === 'Work') { mode = 'Rest'; time = rest; }
          else if (++current > rounds) { clearTimer(); timerDisplay.textContent = "Tabata complete!"; }
          else { mode = 'Work'; time = work; }
        }
      },1000);
    });
  }

  // Custom Interval Timer
  function renderCustomInterval() {
    timerControls.innerHTML = `
      <label>Pattern (e.g. 10,5,10):</label>
      <input type="text" id="customPattern">
      <button id="startCustomInterval"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startCustomInterval').addEventListener('click', (e) => {
      e.preventDefault();
      let pattern = document.getElementById('customPattern').value.split(',').map(x=>parseInt(x.trim(),10));
      if (!pattern.length || pattern.some(isNaN))
        return showFeedback('Enter a comma-separated list of seconds.', true);
      showFeedback('');
      let idx = 0, time = pattern[0];
      clearTimer();
      timer = setInterval(() => {
        timerDisplay.textContent = `Interval ${idx+1}: ${time}s`;
        if (time-- < 1) {
          if (++idx >= pattern.length) { clearTimer(); timerDisplay.textContent = "Custom intervals complete!"; }
          else time = pattern[idx];
        }
      },1000);
    });
  }

  // Presentation Timer
  function renderPresentation() {
    timerControls.innerHTML = `
      <label>Total minutes:</label>
      <input type="number" id="presTime" min="1">
      <button id="startPresentation"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startPresentation').addEventListener('click', (e) => {
      e.preventDefault();
      let time = parseInt(document.getElementById('presTime').value, 10) * 60;
      if (isNaN(time) || time < 1) return showFeedback('Enter total minutes.', true);
      showFeedback('');
      clearTimer();
      timer = setInterval(() => {
        timerDisplay.textContent = `Time left: ${Math.floor(time/60)}m ${time%60}s`;
        if (time-- < 1) { clearTimer(); timerDisplay.textContent = "Presentation time is up!"; }
      },1000);
    });
  }

  // Breathing Timer
  function renderBreathing() {
    timerControls.innerHTML = `
      <label>Inhale (sec):</label><input type="number" id="inhale" min="1">
      <label>Hold (sec):</label><input type="number" id="hold" min="0">
      <label>Exhale (sec):</label><input type="number" id="exhale" min="1">
      <label>Cycles:</label><input type="number" id="cycles" min="1">
      <button id="startBreathing"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startBreathing').addEventListener('click', (e) => {
      e.preventDefault();
      let inhale = parseInt(document.getElementById('inhale').value, 10);
      let hold = parseInt(document.getElementById('hold').value, 10);
      let exhale = parseInt(document.getElementById('exhale').value, 10);
      let cycles = parseInt(document.getElementById('cycles').value, 10);
      if ([inhale, hold, exhale, cycles].some(v=>isNaN(v)||v<0) || inhale < 1 || exhale < 1 || cycles < 1)
        return showFeedback('Enter valid numbers.', true);
      showFeedback('');
      let steps = [];
      for(let i=0; i<cycles; i++){
        steps.push({label:'Inhale',time:inhale});
        if(hold) steps.push({label:'Hold',time:hold});
        steps.push({label:'Exhale',time:exhale});
      }
      let idx = 0, t = steps[0].time;
      clearTimer();
      timer = setInterval(()=>{
        timerDisplay.textContent = `${steps[idx].label}: ${t}s`;
        if(t-- < 1){
          if(++idx>=steps.length){clearTimer();timerDisplay.textContent="Breathing complete!";return;}
          t = steps[idx].time;
        }
      },1000);
    });
  }

  // Repeating Sound Timer
  function renderSoundLoop() {
    timerControls.innerHTML = `
      <label>Interval (sec):</label>
      <input type="number" id="soundInterval" min="1">
      <label>Repeats:</label>
      <input type="number" id="soundRepeats" min="1">
      <button id="startSoundLoop"><i class="fa fa-play"></i>Start</button>`;
    document.getElementById('startSoundLoop').addEventListener('click', (e) => {
      e.preventDefault();
      let interval = parseInt(document.getElementById('soundInterval').value, 10);
      let repeats = parseInt(document.getElementById('soundRepeats').value, 10);
      if (isNaN(interval)||interval<1||isNaN(repeats)||repeats<1)
        return showFeedback('Enter valid values.', true);
      showFeedback('');
      let count = 0;
      clearTimer();
      timer = setInterval(()=>{
        timerDisplay.textContent = `Play sound! (${count+1}/${repeats})`;
        if(window.Audio) new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg').play();
        if(++count>=repeats){clearTimer();timerDisplay.textContent="Sound loop complete!";}
      },interval*1000);
    });
  }

  // Random Timer
  function renderRandom() {
    timerControls.innerHTML = `
      <label>Min Interval (sec):</label>
      <input type="number" id="randomMin" min="1" value="5">
      <label>Max Interval (sec):</label>
      <input type="number" id="randomMax" min="1" value="30">
      <label>Rounds:</label>
      <input type="number" id="randomRounds" min="1" value="5">
      <button id="startRandom"><i class="fa fa-play"></i>Start</button>
    `;
    document.getElementById('startRandom').addEventListener('click', (e) => {
      e.preventDefault();
      let min = parseInt(document.getElementById('randomMin').value, 10);
      let max = parseInt(document.getElementById('randomMax').value, 10);
      let rounds = parseInt(document.getElementById('randomRounds').value, 10);
      if ([min, max, rounds].some(v => isNaN(v) || v < 1) || min > max) {
        return showFeedback('Enter valid min/max (min ≤ max) and rounds.', true);
      }
      showFeedback('');
      clearTimer();
      let current = 1;
      function nextRound() {
        if (current > rounds) {
          timerDisplay.textContent = "Random timer complete!";
          return;
        }
        let duration = Math.floor(Math.random()*(max-min+1)) + min;
        timerDisplay.textContent = `Round ${current}/${rounds}: ${duration}s (Surprise coming!)`;
        timer = setTimeout(() => {
          timerDisplay.textContent = `Round ${current}/${rounds}: Surprise!`;
          if(window.Audio) new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg').play();
          setTimeout(() => {
            current++;
            nextRound();
          }, 1200);
        }, duration*1000);
      }
      nextRound();
    });
  }

});
  </script>
</body>
</html>