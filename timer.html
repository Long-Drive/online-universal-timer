<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="google-site-verification" content="_rbVvxV77Eehwd4IlhosLyiS_2_mUSxppmVnJNP2EAA" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Universal Timer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #f9f9f9;
            color: #222;
            text-align: center;
        }
        header {
            background: #0056b3;
            color: #fff;
            padding: 2rem 1rem 1rem;
        }
        main {
            padding: 2rem;
        }
        select, input, button {
            font-size: 1rem;
            padding: 0.5rem;
            margin: 0.5rem;
        }
        #timerDisplay {
            font-size: 2rem;
            margin: 2rem 0;
        }
        .timer-section {
            display: none;
        }
        .visible {
            display: block;
        }
        button i {
            margin-right: 0.3em;
        }
        button {
            cursor: pointer;
            border: 1px solid #0056b3;
            background: #fff;
            color: #0056b3;
            border-radius: 6px;
            transition: background 0.2s, color 0.2s;
        }
        button:hover, button:active, button:focus {
            background: #0056b3;
            color: #fff;
        }
        input[type="number"], input[type="text"], input[type="datetime-local"] {
            border: 1px solid #aaa;
            border-radius: 5px;
        }
        .feedback {
            color: #c00;
            font-weight: bold;
            margin-top: 1rem;
        }
        .feedback:not(.error) {
            color: #080;
        }
        .back-button {
            display: block;
            margin-top: 20px;
            text-decoration: none;
            color: #0056b3;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <header>
        <h1>Universal Timer</h1>
        <p id="timerSubtitle">Timer for every occasion</p>
    </header>
    <main>
        <div id="timerDisplay" role="status" aria-live="polite"></div>
        <form id="timerControls" aria-label="Timer Controls"></form>
        <div id="feedback" class="feedback" aria-live="polite"></div>
        <a href="index.html" class="back-button">‚Üê Back to Timers</a>
    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const timerDisplay = document.getElementById('timerDisplay');
            const timerControls = document.getElementById('timerControls');
            const feedback = document.getElementById('feedback');
            const timerSubtitle = document.getElementById('timerSubtitle');
            let timer = null, chess = null;

            const urlParams = new URLSearchParams(window.location.search);
            const selectedTimerType = urlParams.get('timer');

            const timerNames = {
                countdown: 'Countdown / Egg Timer',
                stopwatch: 'Stopwatch',
                hiit: 'HIIT Interval Timer',
                pomodoro: 'Pomodoro Timer',
                chess: 'Chess Clock',
                event: 'Event Countdown',
                tabata: 'Tabata Timer',
                custom: 'Custom Interval Timer',
                presentation: 'Presentation Timer',
                breathing: 'Breathing Timer',
                soundloop: 'Repeating Sound Timer',
                random: 'Random Timer'
            };

            const timerMap = {
                countdown: renderCountdown,
                stopwatch: renderStopwatch,
                hiit: renderHIIT,
                pomodoro: renderPomodoro,
                chess: renderChess,
                event: renderEventCountdown,
                tabata: renderTabata,
                custom: renderCustomInterval,
                presentation: renderPresentation,
                breathing: renderBreathing,
                soundloop: renderSoundLoop,
                random: renderRandom
            };

            const clearTimer = () => { if (timer) clearInterval(timer); timer = null; };
            const showFeedback = (msg, isError = false) => {
                feedback.textContent = msg;
                feedback.className = isError ? 'feedback error' : 'feedback';
            };
            const getDurationInSeconds = (value, unit) => {
                if (unit === 'minutes') {
                    return value * 60;
                }
                return value;
            };

            if (selectedTimerType && timerMap[selectedTimerType]) {
                timerSubtitle.textContent = timerNames[selectedTimerType];
                timerDisplay.classList.add('visible');
                timerControls.classList.add('visible');
                timerMap[selectedTimerType]();
            } else {
                window.location.href = 'index.html';
            }

            // Countdown Timer
            function renderCountdown() {
                timerDisplay.textContent = 'Enter the time for your countdown and select the unit.';
                timerControls.innerHTML = `
                    <label for="countdownInput">Time:</label>
                    <input type="number" id="countdownInput" min="1" required>
                    <select id="countdownUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <button id="startCountdown"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startCountdown').addEventListener('click', (e) => {
                    e.preventDefault();
                    let value = parseInt(document.getElementById('countdownInput').value, 10);
                    let unit = document.getElementById('countdownUnit').value;
                    let time = getDurationInSeconds(value, unit);
                    if (isNaN(time) || time < 1) return showFeedback('Please enter a valid positive number.', true);
                    showFeedback('');
                    clearTimer();
                    timerDisplay.textContent = `${time}s`;
                    timer = setInterval(() => {
                        timerDisplay.textContent = time > 0 ? `${time}s` : "Time's up!";
                        if (time-- <= 0) clearTimer();
                    }, 1000);
                });
            }

            // Stopwatch
            function renderStopwatch() {
                timerDisplay.textContent = 'Click "Start" to begin timing.';
                timerControls.innerHTML = `
                    <button id="startStopwatch"><i class="fa fa-play"></i>Start</button>
                    <button id="pauseStopwatch"><i class="fa fa-pause"></i>Pause</button>
                    <button id="resetStopwatch"><i class="fa fa-rotate-left"></i>Reset</button>
                `;
                let elapsed = 0;
                document.getElementById('startStopwatch').addEventListener('click', (e) => {
                    e.preventDefault();
                    clearTimer();
                    timer = setInterval(() => timerDisplay.textContent = `${++elapsed}s`, 1000);
                });
                document.getElementById('pauseStopwatch').addEventListener('click', (e) => {
                    e.preventDefault();
                    clearTimer();
                });
                document.getElementById('resetStopwatch').addEventListener('click', (e) => {
                    e.preventDefault();
                    clearTimer();
                    elapsed = 0;
                    timerDisplay.textContent = '0s';
                });
            }

            // HIIT Timer
            function renderHIIT() {
                timerDisplay.textContent = 'Enter the duration for your work and rest periods, and the number of rounds, then click \'Start\'.';
                timerControls.innerHTML = `
                    <label>Work:</label><input type="number" id="hiitWork" min="1">
                    <select id="hiitWorkUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Rest:</label><input type="number" id="hiitRest" min="1">
                    <select id="hiitRestUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Rounds:</label><input type="number" id="hiitRounds" min="1">
                    <button id="startHIIT"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startHIIT').addEventListener('click', (e) => {
                    e.preventDefault();
                    let workValue = parseInt(document.getElementById('hiitWork').value, 10);
                    let workUnit = document.getElementById('hiitWorkUnit').value;
                    let restValue = parseInt(document.getElementById('hiitRest').value, 10);
                    let restUnit = document.getElementById('hiitRestUnit').value;
                    let rounds = parseInt(document.getElementById('hiitRounds').value, 10);
                    
                    let work = getDurationInSeconds(workValue, workUnit);
                    let rest = getDurationInSeconds(restValue, restUnit);

                    if ([work, rest, rounds].some(v => isNaN(v) || v < 1))
                        return showFeedback('Please enter valid positive numbers for work, rest, and rounds.', true);
                    showFeedback('');
                    let current = 1, mode = 'Work', time = work;
                    clearTimer();
                    timer = setInterval(() => {
                        timerDisplay.textContent = `Round ${current} - ${mode}: ${Math.floor(time/60)}m ${time%60}s`;
                        if (time-- < 1) {
                            if (mode === 'Work') { mode = 'Rest'; time = rest; }
                            else if (++current > rounds) { clearTimer(); timerDisplay.textContent = "HIIT complete!"; }
                            else { mode = 'Work'; time = work; }
                        }
                    }, 1000);
                });
            }

            // Pomodoro Timer
            function renderPomodoro() {
                timerDisplay.textContent = 'Enter the duration for your work and break periods, and the number of rounds, then click \'Start\'.';
                timerControls.innerHTML = `
                    <label>Work:</label><input type="number" id="pomodoroWork" min="1">
                    <select id="pomodoroWorkUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Rest:</label><input type="number" id="pomodoroRest" min="1">
                    <select id="pomodoroRestUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Rounds:</label><input type="number" id="pomodoroRounds" min="1">
                    <button id="startPomodoro"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startPomodoro').addEventListener('click', (e) => {
                    e.preventDefault();
                    let workValue = parseInt(document.getElementById('pomodoroWork').value, 10);
                    let workUnit = document.getElementById('pomodoroWorkUnit').value;
                    let restValue = parseInt(document.getElementById('pomodoroRest').value, 10);
                    let restUnit = document.getElementById('pomodoroRestUnit').value;
                    let rounds = parseInt(document.getElementById('pomodoroRounds').value, 10);
                    
                    let work = getDurationInSeconds(workValue, workUnit);
                    let rest = getDurationInSeconds(restValue, restUnit);

                    if ([work, rest, rounds].some(v => isNaN(v) || v < 1))
                        return showFeedback('Please enter valid values.', true);
                    showFeedback('');
                    let current = 1, mode = 'Work', time = work;
                    clearTimer();
                    timer = setInterval(() => {
                        timerDisplay.textContent = `Round ${current} - ${mode}: ${Math.floor(time/60)}m ${time%60}s`;
                        if (time-- < 1) {
                            if (mode === 'Work') { mode = 'Break'; time = rest; }
                            else if (++current > rounds) { clearTimer(); timerDisplay.textContent = "Pomodoro complete!"; }
                            else { mode = 'Work'; time = work; }
                        }
                    }, 1000);
                });
            }

            // Chess Clock
            function renderChess() {
                timerDisplay.textContent = 'Enter the time for each player and select the unit.';
                timerControls.innerHTML = `
                    <label>Time per player:</label>
                    <input type="number" id="chessTime" min="1">
                    <select id="chessTimeUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes" selected>Minutes</option>
                    </select>
                    <button id="startChess"><i class="fa fa-play"></i>Start</button>
                    <button id="switchBtn" disabled><i class="fa fa-rotate"></i> Switch Player</button>
                `;
                chess = {active: null, times: [0,0], intervals: [null,null], running: false};
                document.getElementById('startChess').addEventListener('click', (e) => {
                    e.preventDefault();
                    let value = parseInt(document.getElementById('chessTime').value, 10);
                    let unit = document.getElementById('chessTimeUnit').value;
                    let totalTime = getDurationInSeconds(value, unit);
                    if (isNaN(totalTime) || totalTime < 1) return showFeedback('Please enter a valid positive number.', true);
                    showFeedback('');
                    chess.times = [totalTime, totalTime];
                    chess.active = 0;
                    chess.running = true;
                    document.getElementById('switchBtn').disabled = false;
                    updateChessDisplay();
                    runChessTimers();
                });
                document.getElementById('switchBtn').addEventListener('click', (e) => {
                    e.preventDefault();
                    if (!chess.running) return;
                    chess.active = chess.active === 0 ? 1 : 0;
                    runChessTimers();
                });
                function runChessTimers() {
                    clearInterval(chess.intervals[0]); clearInterval(chess.intervals[1]);
                    let act = chess.active;
                    chess.intervals[act] = setInterval(() => {
                        chess.times[act]--;
                        updateChessDisplay();
                        if (chess.times[act] <= 0) {
                            clearInterval(chess.intervals[0]); clearInterval(chess.intervals[1]);
                            timerDisplay.textContent = `Player ${act+1} time's up!`;
                            chess.running = false;
                            document.getElementById('switchBtn').disabled = true;
                        }
                    }, 1000);
                }
                function updateChessDisplay() {
                    let format = t => `${Math.floor(t/60)}m ${t%60}s`;
                    timerDisplay.textContent = `Player 1: ${format(chess.times[0])} | Player 2: ${format(chess.times[1])}`;
                }
            }

            // Event Countdown
            function renderEventCountdown() {
                timerDisplay.textContent = 'Select a date and time in the future for the countdown to begin.';
                timerControls.innerHTML = `
                    <label>Date & time:</label>
                    <input type="datetime-local" id="eventTime">
                    <button id="startEventCountdown"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startEventCountdown').addEventListener('click', (e) => {
                    e.preventDefault();
                    let date = new Date(document.getElementById('eventTime').value);
                    if (isNaN(date.getTime())) return showFeedback('Please select a valid date and time.', true);
                    showFeedback('');
                    clearTimer();
                    timer = setInterval(() => {
                        let diff = Math.floor((date.getTime() - Date.now())/1000);
                        if (diff <= 0) { clearTimer(); timerDisplay.textContent = "Event started!"; return; }
                        let d = Math.floor(diff/86400), h = Math.floor((diff%86400)/3600),
                            m = Math.floor((diff%3600)/60), s = diff%60;
                        timerDisplay.textContent = `${d}d ${h}h ${m}m ${s}s left`;
                    },1000);
                });
            }

            // Tabata Timer
            function renderTabata() {
                timerDisplay.textContent = 'Enter the duration for your work and rest periods, and the number of rounds, then click \'Start\'. Default values for Tabata are 20s work, 10s rest, and 8 rounds.';
                timerControls.innerHTML = `
                    <label>Work:</label><input type="number" id="tabataWork" min="1" value="20">
                    <select id="tabataWorkUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Rest:</label><input type="number" id="tabataRest" min="1" value="10">
                    <select id="tabataRestUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Rounds:</label><input type="number" id="tabataRounds" min="1" value="8">
                    <button id="startTabata"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startTabata').addEventListener('click', (e) => {
                    e.preventDefault();
                    let workValue = parseInt(document.getElementById('tabataWork').value, 10);
                    let workUnit = document.getElementById('tabataWorkUnit').value;
                    let restValue = parseInt(document.getElementById('tabataRest').value, 10);
                    let restUnit = document.getElementById('tabataRestUnit').value;
                    let rounds = parseInt(document.getElementById('tabataRounds').value, 10);
                    
                    let work = getDurationInSeconds(workValue, workUnit);
                    let rest = getDurationInSeconds(restValue, restUnit);
                    
                    if ([work, rest, rounds].some(v => isNaN(v) || v < 1))
                        return showFeedback('Please enter valid values.', true);
                    showFeedback('');
                    let current = 1, mode = 'Work', time = work;
                    clearTimer();
                    timer = setInterval(() => {
                        timerDisplay.textContent = `Round ${current} - ${mode}: ${Math.floor(time/60)}m ${time%60}s`;
                        if (time-- < 1) {
                            if (mode === 'Work') { mode = 'Rest'; time = rest; }
                            else if (++current > rounds) { clearTimer(); timerDisplay.textContent = "Tabata complete!"; }
                            else { mode = 'Work'; time = work; }
                        }
                    },1000);
                });
            }

            // Custom Interval Timer
            function renderCustomInterval() {
                timerDisplay.textContent = 'Enter a comma-separated list of positive numbers for your intervals and select the unit.';
                timerControls.innerHTML = `
                    <label>Pattern (e.g. 10,5,10):</label>
                    <input type="text" id="customPattern">
                    <select id="customPatternUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <button id="startCustomInterval"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startCustomInterval').addEventListener('click', (e) => {
                    e.preventDefault();
                    let unit = document.getElementById('customPatternUnit').value;
                    let patternValues = document.getElementById('customPattern').value.split(',').map(x=>parseInt(x.trim(),10));
                    let pattern = patternValues.map(v => getDurationInSeconds(v, unit));
                    if (!pattern.length || pattern.some(isNaN) || pattern.some(x=>x<1))
                        return showFeedback('Enter a comma-separated list of positive numbers for your intervals.', true);
                    showFeedback('');
                    let idx = 0, time = pattern[0];
                    clearTimer();
                    timer = setInterval(() => {
                        timerDisplay.textContent = `Interval ${idx+1}: ${Math.floor(time/60)}m ${time%60}s`;
                        if (time-- < 1) {
                            if (++idx >= pattern.length) { clearTimer(); timerDisplay.textContent = "Custom intervals complete!"; }
                            else time = pattern[idx];
                        }
                    },1000);
                });
            }

            // Presentation Timer
            function renderPresentation() {
                timerDisplay.textContent = 'Enter the total time for your presentation and select the unit.';
                timerControls.innerHTML = `
                    <label>Total time:</label>
                    <input type="number" id="presTime" min="1">
                    <select id="presTimeUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes" selected>Minutes</option>
                    </select>
                    <button id="startPresentation"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startPresentation').addEventListener('click', (e) => {
                    e.preventDefault();
                    let value = parseInt(document.getElementById('presTime').value, 10);
                    let unit = document.getElementById('presTimeUnit').value;
                    let time = getDurationInSeconds(value, unit);
                    if (isNaN(time) || time < 1) return showFeedback('Enter a valid positive number.', true);
                    showFeedback('');
                    clearTimer();
                    timer = setInterval(() => {
                        timerDisplay.textContent = `Time left: ${Math.floor(time/60)}m ${time%60}s`;
                        if (time-- < 1) { clearTimer(); timerDisplay.textContent = "Presentation time is up!"; }
                    },1000);
                });
            }

            // Breathing Timer
            function renderBreathing() {
                timerDisplay.textContent = 'Enter the duration for your inhale, optional hold, and exhale periods, and the number of cycles, then click \'Start\'.';
                timerControls.innerHTML = `
                    <label>Inhale:</label><input type="number" id="inhale" min="1">
                    <select id="inhaleUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Hold:</label><input type="number" id="hold" min="0">
                    <select id="holdUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Exhale:</label><input type="number" id="exhale" min="1">
                    <select id="exhaleUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Cycles:</label><input type="number" id="cycles" min="1">
                    <button id="startBreathing"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startBreathing').addEventListener('click', (e) => {
                    e.preventDefault();
                    let inhaleValue = parseInt(document.getElementById('inhale').value, 10);
                    let inhaleUnit = document.getElementById('inhaleUnit').value;
                    let holdValue = parseInt(document.getElementById('hold').value, 10);
                    let holdUnit = document.getElementById('holdUnit').value;
                    let exhaleValue = parseInt(document.getElementById('exhale').value, 10);
                    let exhaleUnit = document.getElementById('exhaleUnit').value;
                    let cycles = parseInt(document.getElementById('cycles').value, 10);
                    
                    let inhale = getDurationInSeconds(inhaleValue, inhaleUnit);
                    let hold = getDurationInSeconds(holdValue, holdUnit);
                    let exhale = getDurationInSeconds(exhaleValue, exhaleUnit);
                    
                    if ([inhale, hold, exhale, cycles].some(v=>isNaN(v)||v<0) || inhale < 1 || exhale < 1 || cycles < 1)
                        return showFeedback('Enter valid numbers.', true);
                    showFeedback('');
                    let steps = [];
                    for(let i=0; i<cycles; i++){
                        steps.push({label:'Inhale',time:inhale});
                        if(hold) steps.push({label:'Hold',time:hold});
                        steps.push({label:'Exhale',time:exhale});
                    }
                    let idx = 0, t = steps[0].time;
                    clearTimer();
                    timer = setInterval(()=>{
                        timerDisplay.textContent = `${steps[idx].label}: ${Math.floor(t/60)}m ${t%60}s`;
                        if(t-- < 1){
                            if(++idx>=steps.length){clearTimer();timerDisplay.textContent="Breathing complete!";return;}
                            t = steps[idx].time;
                        }
                    },1000);
                });
            }

            // Repeating Sound Timer
            function renderSoundLoop() {
                timerDisplay.textContent = 'Enter the interval and number of repeats, then select the unit for the interval.';
                timerControls.innerHTML = `
                    <label>Interval:</label>
                    <input type="number" id="soundInterval" min="1">
                    <select id="soundIntervalUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Repeats:</label>
                    <input type="number" id="soundRepeats" min="1">
                    <button id="startSoundLoop"><i class="fa fa-play"></i>Start</button>`;
                document.getElementById('startSoundLoop').addEventListener('click', (e) => {
                    e.preventDefault();
                    let intervalValue = parseInt(document.getElementById('soundInterval').value, 10);
                    let intervalUnit = document.getElementById('soundIntervalUnit').value;
                    let repeats = parseInt(document.getElementById('soundRepeats').value, 10);
                    
                    let interval = getDurationInSeconds(intervalValue, intervalUnit);
                    
                    if (isNaN(interval)||interval<1||isNaN(repeats)||repeats<1)
                        return showFeedback('Enter valid values.', true);
                    showFeedback('');
                    let count = 0;
                    clearTimer();
                    timer = setInterval(()=>{
                        timerDisplay.textContent = `Play sound! (${count+1}/${repeats})`;
                        if(window.Audio) new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg').play();
                        if(++count>=repeats){clearTimer();timerDisplay.textContent="Sound loop complete!";}
                    },interval*1000);
                });
            }

            // Random Timer
            function renderRandom() {
                timerDisplay.textContent = 'Enter the range and rounds for a random timer and select the unit.';
                timerControls.innerHTML = `
                    <label>Min Interval:</label>
                    <input type="number" id="randomMin" min="1" value="5">
                    <label>Max Interval:</label>
                    <input type="number" id="randomMax" min="1" value="30">
                    <select id="randomUnit">
                        <option value="seconds">Seconds</option>
                        <option value="minutes">Minutes</option>
                    </select>
                    <label>Rounds:</label>
                    <input type="number" id="randomRounds" min="1" value="5">
                    <button id="startRandom"><i class="fa fa-play"></i>Start</button>
                `;
                document.getElementById('startRandom').addEventListener('click', (e) => {
                    e.preventDefault();
                    let minValue = parseInt(document.getElementById('randomMin').value, 10);
                    let maxValue = parseInt(document.getElementById('randomMax').value, 10);
                    let unit = document.getElementById('randomUnit').value;
                    let rounds = parseInt(document.getElementById('randomRounds').value, 10);
                    
                    let min = getDurationInSeconds(minValue, unit);
                    let max = getDurationInSeconds(maxValue, unit);
                    
                    if ([min, max, rounds].some(v => isNaN(v) || v < 1) || min > max) {
                        return showFeedback('Enter valid min/max (min ‚â§ max) and rounds.', true);
                    }
                    showFeedback('');
                    clearTimer();
                    let current = 1;

                    function startRandomInterval() {
                        if (current > rounds) {
                            timerDisplay.textContent = "Random timer complete!";
                            return;
                        }
                        let duration = Math.floor(Math.random()*(max-min+1)) + min;
                        let timeLeft = duration;

                        timerDisplay.textContent = `Round ${current}/${rounds}: ${Math.floor(timeLeft/60)}m ${timeLeft%60}s`;

                        clearTimer();
                        timer = setInterval(() => {
                            timeLeft--;
                            if (timeLeft > 0) {
                                timerDisplay.textContent = `Round ${current}/${rounds}: ${Math.floor(timeLeft/60)}m ${timeLeft%60}s`;
                            } else {
                                clearTimer();
                                timerDisplay.textContent = `Round ${current}/${rounds}: Surprise!`;
                                if(window.Audio) new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg').play();
                                setTimeout(() => {
                                    current++;
                                    startRandomInterval();
                                }, 1200);
                            }
                        }, 1000);
                    }

                    startRandomInterval();
                });
            }
        });
    </script>
</body>
</html>